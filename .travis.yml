dist: bionic
os: linux
language: generic

jobs:
  include:
    services:
    - mongodb
    script:
    # Issue with spaces after the colon below
    - printf '\nreplication:\n  replSetName: rs0' | sudo tee -a /etc/mongod.conf
    - cat /etc/mongod.conf
    - sudo systemctl restart mongod
    - sleep 20
    - sudo systemctl status mongod --full
    - mongo --eval 'rs.initiate()'
    - sleep 20
    - sudo cat /var/log/mongodb/mongod.log
    - sudo journalctl -xd mongod
